<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <title>Year 8 Spanish Vocabulary Practice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        * { -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .navbar {
            background: #DD1F25;
            color: white;
            height: 60px;
            display: flex;
            align-items: center;
            padding: 0 30px;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 1px;
            box-shadow: 0 2px 12px rgba(221, 31, 37, 0.15);
        }

        .navbar a {
            color: white;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            margin-right: 25px;
            transition: all 0.2s ease;
            padding: 6px 12px;
            border-radius: 4px;
        }

        .navbar a:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-3px);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .page-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #DD1F25;
            text-align: center;
            margin-bottom: 40px;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 14px rgba(221, 31, 37, 0.09);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #DD1F25;
            margin-bottom: 20px;
        }

        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .module-btn, .week-btn {
            background: rgba(221, 31, 37, 0.05);
            border: 2px solid #DD1F25;
            color: #DD1F25;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.25s ease;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .module-btn:hover, .week-btn:hover {
            background: #DD1F25;
            color: white;
            transform: translateY(-1px);
        }

        /* Disable hover on touch devices */
        @media (hover: none) {
            .module-btn:hover, .week-btn:hover {
                background: rgba(221, 31, 37, 0.05);
                color: #DD1F25;
                transform: none;
            }
            .module-btn.selected:hover, .week-btn.selected:hover {
                background: #DD1F25;
                color: white;
            }
            .module-btn.has-selections:hover {
                background: rgba(221, 31, 37, 0.44);
                color: #DD1F25;
            }
        }

        .module-btn.selected, .week-btn.selected {
            background: #DD1F25;
            color: white;
        }

        .module-btn.selected:hover, .week-btn.selected:hover {
            background: #c11a1f;
        }

        .module-btn.has-selections {
            background: rgba(221, 31, 37, 0.44);
            border-color: #DD1F25;
            color: #DD1F25;
            font-weight: 700;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .select-all-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .select-all-checkbox:hover {
            background: rgba(221, 31, 37, 0.05);
        }

        .select-all-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #DD1F25;
        }

        .select-all-checkbox label {
            cursor: pointer;
            font-weight: 600;
            color: #DD1F25;
            font-size: 0.9rem;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .setting-card {
            background: #f8f8f8;
            border-radius: 8px;
            padding: 20px;
        }

        .setting-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            display: block;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 12px 16px;
            border-radius: 8px;
            background: white;
            border: 2px solid #e0e0e0;
            transition: all 0.2s;
        }

        .radio-option:hover {
            border-color: #DD1F25;
            background: rgba(221, 31, 37, 0.02);
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #DD1F25;
        }

        .radio-option input[type="radio"]:checked + span {
            color: #DD1F25;
            font-weight: 600;
        }

        .radio-option:has(input[type="radio"]:checked) {
            border-color: #DD1F25;
            background: rgba(221, 31, 37, 0.05);
        }

        .start-btn {
            background: #DD1F25;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: all 0.3s;
        }

        .start-btn:hover {
            background: #c11a1f;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(221, 31, 37, 0.3);
        }

        .start-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Test Interface */
        .test-container {
            display: none;
        }

        .test-container.active {
            display: block;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-to-setup-btn {
            background: #DD1F25;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-to-setup-btn:hover {
            background: #c11a1f;
            transform: translateX(-3px);
        }

        .progress-bar {
            background: #e0e0e0;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: #DD1F25;
            height: 100%;
            transition: width 0.3s;
        }

        .flashcard {
            background: white;
            border-radius: 12px;
            padding: 60px 40px;
            text-align: center;
            box-shadow: 0 6px 24px rgba(221, 31, 37, 0.15);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .flashcard:hover {
            transform: scale(1.02);
        }

        .flashcard-question {
            font-size: 2rem;
            font-weight: 700;
            color: #DD1F25;
            margin-bottom: 20px;
        }

        .flashcard-answer {
            font-size: 1.5rem;
            color: #666;
            display: none;
        }

        .flashcard.revealed .flashcard-answer {
            display: block;
        }

        .typing-test {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 6px 24px rgba(221, 31, 37, 0.15);
            position: relative;
        }

        .typing-question {
            font-size: 1.8rem;
            font-weight: 700;
            color: #DD1F25;
            margin-bottom: 30px;
            text-align: center;
        }

        .typing-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border: 2px solid #DD1F25;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .submit-btn {
            background: #DD1F25;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: block;
            margin: 20px auto 0 auto;
        }

        .submit-btn:hover {
            background: #c11a1f;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .next-btn {
            background: #DD1F25;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s;
        }

        .next-btn:hover {
            background: #c11a1f;
        }

        .running-total {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 0.8rem;
            color: #999;
            font-weight: 500;
        }

        .results {
            background: white;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 6px 24px rgba(221, 31, 37, 0.15);
        }

        .results-title {
            font-size: 2rem;
            font-weight: 700;
            color: #DD1F25;
            margin-bottom: 20px;
        }

        .results-score {
            font-size: 3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <a href="../spanish-vocab.html">‚Üê Back</a>
        Year 8 Quiz
    </div>

    <div class="container">
        <!-- Setup Interface -->
        <div id="setupInterface">
            <h1 class="page-title">Vocabulary Practice</h1>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title" style="margin-bottom: 0;">Select Modules</h2>
                    <div class="select-all-checkbox" onclick="selectAllModules()">
                        <input type="checkbox" id="allModulesCheckbox" onclick="event.stopPropagation(); selectAllModules();">
                        <label for="allModulesCheckbox" onclick="event.stopPropagation(); selectAllModules();">All Modules</label>
                    </div>
                </div>
                <div class="module-grid" id="moduleSelection"></div>
            </div>

            <div class="section" id="weekSection" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title" style="margin-bottom: 0;">Select Weeks</h2>
                    <div class="select-all-checkbox" onclick="selectAllWeeks()">
                        <input type="checkbox" id="allWeeksCheckbox" onclick="event.stopPropagation(); selectAllWeeks();">
                        <label for="allWeeksCheckbox" onclick="event.stopPropagation(); selectAllWeeks();">Select All</label>
                    </div>
                </div>
                <div class="module-grid" id="weekSelection"></div>
            </div>

            <div class="section">
                <h2 class="section-title">Test Settings</h2>
                <div class="settings-grid">
                    <div class="setting-card">
                        <label class="setting-label">Direction</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="direction" value="es-en" checked>
                                <span>Spanish ‚Üí English</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="direction" value="en-es">
                                <span>English ‚Üí Spanish</span>
                            </label>
                        </div>
                    </div>
                    <div class="setting-card">
                        <label class="setting-label">Mode</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="mode" value="flashcards" checked>
                                <span>Flashcards</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="mode" value="typing">
                                <span>Type Answers</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <button class="start-btn" id="startBtn" disabled>Start Practice</button>
        </div>

        <!-- Test Interface -->
        <div class="test-container" id="testInterface">
            <div class="test-header">
                <button class="back-to-setup-btn" onclick="backToSetup()">
                    <span>‚Üê</span>
                    <span>Back to Year 8 Vocab</span>
                </button>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div id="testContent"></div>
        </div>
    </div>

    <script>
        // Vocabulary Data Structure
        const VOCAB_DATA = `
Module 1:
Week 1:

Soy - I am (+ description)
Estoy - I am (+ location)
Tengo - I have
Voy - I go 
Juego - I play 
Hago - I do/make 
Es - It is 
Son - They are 
Vivo - I live 
Estudio - I study 
Me gusta(n) - I like 
Me encanta(n) - I love 
Voy a jugar - I am going to play 
Voy a tener - I am going to have 
Voy a hacer - I am going to do 

Week 2:

¬øAd√≥nde fuiste de vacaciones? - Where did you go on holiday?
El a√±o pasado - Last year 
El verano pasado - Last summer 
Fui a Escocia - I went to Scotland 
...a Espa√±a - To Spain 
...a Grecia - To Greece 
...a Francia - To France 
...a los Estados Unidos - To the United States  
...a Turqu√≠a - To Turkey 
¬øCon qui√©n fuiste? - Who did you go with? 
Fui con mi familia - I went with my family 
...con mi clase - with my class 
...con mis padres - with my parents 
...con mi mejor amigo/ con mi mejor amiga - with my best friend 
...solo/sola - alone 

Week 3:

Fui - I went 
Fuiste - You went 
Fue - He went/ She went/ It went 
Fuimos - We went 
Fuisteis - You(pl) went 
Fueron - They went 
¬øC√≥mo fuiste? - How did you go?
Fui en avi√≥n - I went by plane 
...en barco - By boat 
...en coche - by car 
...en tren - by train 
...en autocar - by coach
...en autob√∫s - by bus 
...en bicicleta - by bike 
...a pie - by foot 

Week 4:

¬øQu√© hiciste en tus vacaciones? - What did you do on your holiday?
Visit√© monumentos - I visited monuments
Compr√© una camiseta - I bought a T-shirt 
Saqu√© fotos - I took photos
Mont√© una bicicleta - I rode a bike 
Descans√© en la playa - I rested on the beach 
Mand√© SMS/mensajes - I sent text messages 
Bail√© - I danced
Nad√© en el mar - I swam in the sea
Tom√© el sol - I sunbathed
El primer d√≠a - On the first day
Luego - Then
Despu√©s - After
Despu√©s - Afterwards
¬°Qu√© genial! - How cool!

Week 5:


¬øQu√© hiciste? - What did you do?
Com√≠ paella - I ate paella 
Sal√≠ con mi amigo/Sal√≠ con mi amiga - I went out with my friend 
Escrib√≠ SMS/mensajes - I wrote text messages 
Vi un castillo - I saw a castle 
Conoc√≠ a un chico guapo - I met a good looking boy 
Conoc√≠ a una chica guapa - I met a good looking girl
Por la ma√±ana - In the morning 
Por la tarde - In the afternoon 
Com√≠ - I ate 
Comiste - You ate 
Comi√≥ - He/She ate 
Comimos - We ate 
Comisteis - You(pl) ate 
Comieron - They ate 
¬°Qu√© aburrido! - How boring!

Week 6:

¬øC√≥mo te fue? - How did it go (for you)?
Fue guay - It was cool 
Fue raro - It was strange 
Fue regular - It was so-so 
Fue un desastre - It was a disaster 
Fue horrible - It was horrible 
Fue divertido - It was fun 
Fue flipante - It was amazing 
Fue genial - It was great 
Fue horroroso - It was dreadful
¬øPor qu√©? - Why?
¬øAd√≥nde fuiste de vacaciones? - Where did you go on holiday?
¬øCon qui√©n fuiste? - Who did you go with? 
¬øC√≥mo fuiste? - How did you go? 
¬øQu√© hiciste? - What did you do? 

Module 2:
Week 1:

¬øQu√© haces con tu m√≥vil? - What do you do with your mobile?
Todos los d√≠as - Every day
Saco fotos - I take photos
Hablo por WhatsApp - I talk on WhatsApp
Mando SMS / Mando mensajes - I send text messages
Juego - I play
Leo mis SMS - I read my text messages
Escucho m√∫sica - I listen to music
Descargo m√∫sica - I download music
Descargo melod√≠as - I download ringtones/tunes
Descargo aplicaciones - I download apps
Chateo con mis amigos - I chat with my friends
Comparto v√≠deos - I share videos
Veo v√≠deos - I watch videos
Veo pel√≠culas - I watch films
¬øHablas con tus amigos? - Do you talk with your friends?


Week 2:

Dos o tres veces a la semana - Two or three times a week
A veces - Sometimes
De vez en cuando - From time to time
Nunca - Never
¬øQu√© hay en la foto? - What is there in the photo?
En la foto hay... - In the photo there is / In the photo there are...
Un chico / una chica - A boy / a girl
Un hombre / una mujer - A man / a woman
Una familia - A family
(Muchas) personas - (Many) people
En el centro - In the centre
A la izquierda - To the left
A la derecha - To the right
Creo que... - I think that...

Week 3:

¬øQu√© tipo de m√∫sica te gusta? - What type of music do you like?
Me gusta... - I like...
Me gusta mucho... - I really like...
Me encanta... - I love...
El rap - Rap music / Rap
El rock - Rock music / Rock
El R'n'B - R'n'B
La m√∫sica electr√≥nica - Electronic music
La m√∫sica cl√°sica - Classical music
La m√∫sica de... - ...'s music
Escucho de todo - I listen to everything
Mi canci√≥n favorita es... - My favourite song is...
Mi grupo favorito es... - My favourite group is...
La letra - The lyrics
El ritmo - The rhythm / beat

Week 4:
¬øQu√© tipo de programa te gusta? - What type of programme do you like?
Prefiero... - I prefer...
Los programas de deportes - Sports programmes
Los reality - Reality TV shows
Los concursos - Game shows
Los documentales - Documentaries
Las comedias - Comedies
Las series polic√≠acas - Police series
Las telenovelas - Soap operas
Los telediarios - News programmes
Informativo/a - Informative
Interesante - Interesting
Mi programa favorito es... - My favourite programme is...
Es m√°s divertido/a que... - It is more fun than...
Son m√°s emocionantes que... - They are more exciting than...

Week 5:

¬øQu√© hiciste ayer? - What did you do yesterday?
Ayer - Yesterday
Por la ma√±ana - In the morning
Por la tarde - In the afternoon
Hice k√°rate - I did karate
Mont√© en bici - I rode a bike
Jugu√© en l√≠nea - I played online
Vi una pel√≠cula - I watched a film
Hice gimnasia - I did gymnastics
Habl√© por Skype - I spoke on Skype
Hice los deberes - I did my homework
Bail√© - I danced
Sal√≠ con mis amigos/as - I went out with my friends
Luego - Then
Un poco m√°s tarde - A bit later

Module 3:
Week 1:

¬øQu√© te gusta comer? - What do you like to eat?
¬øQu√© te gusta beber? - What do you like to drink? 
Me gusta(n) - I like... 
El arroz - The rice 
Los huevos - The eggs 
La leche - The milk 
El agua - The water 
La carne - The meat 
Las hamburguesas - The hamburgers  
El marisco - The seafood 
El pescado - The fish  
Los caramelos - The sweets 
El queso - The cheese 
La fruta - The fruit 
Las verduras - The vegetables 

Week 2:

¬øQu√© desayunas? - What do you have for breakfast?
Desayuno... - I have ... for breakfast 
¬øQu√© comes? - What do you have for lunch?
Como... - I have ... for lunch 
¬øQu√© cenas? - What do you have for dinner?
Ceno... - I have ... for dinner 
(los) Cereales - Cereal 
(los) Churros - Churros 
(el) Yogur - Yoghurt 
(las) Tostadas - Toast 
(el) ColaCao - ColaCao (Chocolate milk)
(el) Caf√© - Coffee 
(el) Zumo de naranja - Orange juice  
No desayuno nada - I don't have anything for breakfast 

Week 3:

(la) Paella - Paella 
Un bocadillo - A sandwich 
(el) Pollo - Chicken 
(la) Ensalada - Salad
(el) Pescado - Fish 
(el) Arroz - Rice 
(las) Patatas fritas - Chips/Crisps 
Todos los d√≠as - Every day 
Normalmente - Normally 
Solamente - Only
Nunca - Never 
¬°Qu√© rico! - How tasty! 
¬°Qu√© asco! - How disgusting!
¬°√ëam, √±am! - Yum, yum! 

Week 4:

En el restaurante - In the restaurant 
¬øQu√© va a tomar? - What are you going to have? 
¬øQu√© van a tomar? - What are you(pl) going to have? 
¬øY usted? - And you? 
Voy a tomar... - I am going to have...
Tambi√©n - Also 
Tengo hambre - I am hungry 
Tengo sed - I am thirsty 
De primer plato... - For starter... 
De segundo plato... - For main...
De postre... - For dessert... 
Para beber... - To drink 
¬øAlgo m√°s? - Anything else? 
No, nada m√°s, gracias - No, nothing else, thank you 
La cuenta, por favor - The bill, please

Module 4:

Week 1:

¬øTe gustar√≠a venir a mi casa? - Would you like to come to my house?
Me gustar√≠a... - I would like...
Ir al centro comercial - To go to the shopping centre
Ir al parque - To go to the park
Ir al polideportivo - To go to the sports centre
Ir al museo - To go to the museum
Ir a la bolera - To go to the bowling alley
Ir a la pista de hielo - To go to the ice rink
Vale - Okay
De acuerdo - Agreed
Muy bien - Very well
¬°Genial! - Great!
¬°Ni hablar! - No way!
¬°Ni en sue√±os! - Not even in your dreams!
No tengo ganas - I don't feel like it

Week 2:

¬øTe gustar√≠a ir al cine? - Would you like to go to the cinema?
S√≠, me gustar√≠a mucho - Yes, I would really like to
¬øD√≥nde est√°? - Where is it?
Est√° - It is
Detr√°s de... - Behind...
Delante de... - In front of...
Enfrente de... - Opposite...
Al lado de... - Next to...
En... - In...
¬øA qu√© hora? - At what time?
A las seis - At six o'clock
A las dos y cuarto - At quarter past two
A la una y media - At half past one
A las diez menos cuarto - At quarter to ten
¬øD√≥nde quedamos? - Where shall we meet?

Week 3:

¬øQuieres salir? - Do you want to go out?
¬øQuieres ir a la playa? - Do you want to go to the beach?
Lo siento - Sorry
No puedo - I can't
¬øPor qu√© no? - Why not?
Tengo que... - I have to...
Hacer los deberes - Do homework
Ordenar mi dormitorio - Tidy my room
Pasear al perro - Walk the dog
Lavarme el pelo - Wash my hair
Salir con mis padres - Go out with my parents
Cuidar a mi hermano/a - Look after my brother/sister
No quiero - I don't want to
No tengo dinero - I don't have money
¬°Qu√© rollo! - What a pain!

Week 4:

¬øC√≥mo te preparas? - How do you get ready?
Me ducho - I shower
Me ba√±o - I bathe
Me lavo la cara - I wash my face
Me lavo los dientes - I brush my teeth
Me visto - I get dressed
Me peino - I comb my hair
Me maquillo - I put on makeup
Me pongo gomina - I put on hair gel
Me aliso el pelo - I straighten my hair
Primero - First
Luego - Then
Despu√©s - After
Siempre - Always
Finalmente - Finally

Week 5:

¬øQu√© llevas? - What are you wearing?
¬øQu√© vas a llevar? - What are you going to wear?
Llevo... - I wear...
Un jersey - A jumper
Un vestido - A dress
Una camiseta - A t-shirt
Una camisa - A shirt
Una falda - A skirt
Una gorra - A cap
Una sudadera - A sweatshirt
Unos pantalones - Some trousers 
Unos vaqueros - Some jeans
Unos zapatos - Some shoes
Unas botas - Some boots
Unas zapatillas de deporte - Some trainers

Week 6:

Llevo - I wear
Llev√© - I wore
Voy a llevar - I am going to wear
Como - I eat
Com√≠ - I ate
Voy a comer - I am going to eat
Hago - I do
Hice - I did
Voy a hacer - I am going to do
Juego - I play
Jugu√© - I played
Voy a jugar - I am going to play
El equipo - The team
El portero - The goalkeeper
El partido - The match

Module 5:

Week 1:
Las casas de vacaciones - Holiday houses
¬øC√≥mo es? - What is it like?
Es un poco grande - It is a bit big
Es bastante moderno - It is quite modern
Es muy antigua - It is very old
Es c√≥moda - It is comfortable
Tiene... - It has...
...cuatro dormitorios - four bedrooms
...un jacuzzi - a jacuzzi
...dos cuartos de ba√±o - two bathrooms
...un jard√≠n con piscina - a garden with a pool
¬øD√≥nde est√°? - Where is it?
Est√° en el centro - It is in the centre
Est√° en la monta√±a - It is in the mountains
Est√° cerca de la playa - It is near the beach

Week 2:

¬øQu√© se puede hacer? - What can you do?
Se puede(n)... - You can...
...ir de paseo en bicicleta - go for a bike ride
...ir al restaurante - go to the restaurant
...ir a la playa - go to the beach
...visitar un castillo - visit a castle
...jugar al golf - play golf
...ver la catedral - see the cathedral
...hacer senderismo - ...go hiking 
...hacer actividades n√°uticas - do nautical activities
...ir de compras - ...go shopping
El parque m√°s grande - The biggest park
La playa m√°s bonita - The prettiest beach
Las calles m√°s importantes - The most important streets
Tambi√©n - Also

Week 3:

¬øD√≥nde est√°? - Where is it?
El parque de atracciones - The theme park
El zoo - The zoo
El minigolf - The miniature golf course
La pista de karting - The go karting track
La catedral - The cathedral
La estaci√≥n de tren - The train station
Sigue todo recto - Go straight on
Dobla a la derecha - Turn right
Dobla a la izquierda - Turn left
Toma la primera calle a la derecha - Take the first street on the right
Toma la segunda calle a la izquierda - Take the second street on the left
Cruza la plaza - Cross the square
Est√° a la derecha - It is on the right
Est√° a la izquierda - It is on the left

Week 4:

Los campamentos de verano - Summer camps
Hacer senderismo - To go hiking
Montar a caballo - To go horse-riding
Ir de pesca - To go fishing
Hacer escalada - To go climbing
Dormir en tiendas (de campa√±a) - To sleep in tents
Hacer cursos de ingl√©s - To do English courses
Disfrutar de... - To enjoy
Ir de excursi√≥n - To go on a trip
Hacer windsurf - To do windsurfing
Hacer vela - To do sailing
Cantar - To sing
Bailar - To dance
Me gustar√≠a - I would like
Me encantar√≠a - I would love

Week 5:

Pues... - Well...
A ver... - Let's see...
No s√©... - I don't know...
Depende... - It depends...
Hoy - Today
Ayer - Yesterday
Ma√±ana - Tomorrow
El fin de semana pasado - Last weekend
El a√±o pasado - Last year
Este fin de semana - This weekend
Hace dos a√±os - Two years ago
El a√±o que viene - Next year
Voy - I go
Fui - I went
Voy a ir - I am going to go
`;

        // Parse vocabulary data
        function parseVocabData(text) {
            const modules = {};
            const lines = text.trim().split('\n');
            let currentModule = null;
            let currentWeek = null;

            for (let line of lines) {
                line = line.trim();
                if (!line) continue;

                if (line.startsWith('Module ')) {
                    const moduleNum = line.match(/Module (\d+):/)[1];
                    currentModule = `Module ${moduleNum}`;
                    modules[currentModule] = {};
                } else if (line.startsWith('Week ')) {
                    const weekNum = line.match(/Week (\d+):/)[1];
                    currentWeek = `Week ${weekNum}`;
                    modules[currentModule][currentWeek] = [];
                } else if (line.includes(' - ')) {
                    const [spanish, english] = line.split(' - ').map(s => s.trim());
                    modules[currentModule][currentWeek].push({ spanish, english });
                }
            }

            return modules;
        }

        const vocabData = parseVocabData(VOCAB_DATA);
        let currentModule = null;  // Track currently selected module
        let selectedWeeksByModule = {};  // Store selected weeks for each module
        let testQuestions = [];
        let currentQuestion = 0;
        let correctAnswers = 0;

        // Initialize UI
        function initializeUI() {
            const moduleSelection = document.getElementById('moduleSelection');
            
            Object.keys(vocabData).forEach(module => {
                const btn = document.createElement('button');
                btn.className = 'module-btn';
                btn.textContent = module;
                btn.onclick = () => toggleModule(module, btn);
                moduleSelection.appendChild(btn);
            });
        }

        function toggleModule(module, btn) {
            // Deselect all other module buttons
            const allModuleBtns = document.querySelectorAll('.module-btn');
            allModuleBtns.forEach(b => {
                b.classList.remove('selected');
                // Check if this module has selections and isn't the current one
                const moduleName = b.textContent;
                if (selectedWeeksByModule[moduleName] && selectedWeeksByModule[moduleName].size > 0) {
                    b.classList.add('has-selections');
                } else {
                    b.classList.remove('has-selections');
                }
            });
            
            // Select this module and remove has-selections class (selected takes priority)
            currentModule = module;
            btn.classList.add('selected');
            btn.classList.remove('has-selections');
            
            updateWeekSelection();
            updateStartButton();
        }

        function updateWeekSelection() {
            const weekSection = document.getElementById('weekSection');
            const weekSelection = document.getElementById('weekSelection');
            
            if (!currentModule) {
                weekSection.style.display = 'none';
                return;
            }

            weekSection.style.display = 'block';
            weekSelection.innerHTML = '';

            // Initialize selected weeks for this module if not exists
            if (!selectedWeeksByModule[currentModule]) {
                selectedWeeksByModule[currentModule] = new Set();
            }

            // Show only weeks for the current module
            Object.keys(vocabData[currentModule]).forEach(week => {
                const btn = document.createElement('button');
                btn.className = 'week-btn';
                btn.textContent = `${currentModule} - ${week}`;
                btn.dataset.module = currentModule;
                btn.dataset.week = week;
                
                // Check if this week was previously selected
                const key = `${currentModule}-${week}`;
                if (selectedWeeksByModule[currentModule].has(week)) {
                    btn.classList.add('selected');
                }
                
                btn.onclick = () => toggleWeek(currentModule, week, btn);
                weekSelection.appendChild(btn);
            });
            
            // Update the Select All checkbox state
            updateAllWeeksCheckbox();
        }

        function toggleWeek(module, week, btn) {
            if (!selectedWeeksByModule[module]) {
                selectedWeeksByModule[module] = new Set();
            }
            
            if (selectedWeeksByModule[module].has(week)) {
                selectedWeeksByModule[module].delete(week);
                btn.classList.remove('selected');
            } else {
                selectedWeeksByModule[module].add(week);
                btn.classList.add('selected');
            }
            
            updateStartButton();
            updateModuleStates();
            updateAllWeeksCheckbox();
            updateAllModulesCheckbox();
        }

        function updateModuleStates() {
            // Update all module buttons to show has-selections state
            const allModuleBtns = document.querySelectorAll('.module-btn:not(#selectAllModulesBtn)');
            allModuleBtns.forEach(btn => {
                const moduleName = btn.textContent;
                if ((moduleName !== currentModule) && selectedWeeksByModule[moduleName] && selectedWeeksByModule[moduleName].size > 0) {
                    btn.classList.add('has-selections');
                } else if (moduleName !== currentModule) {
                    btn.classList.remove('has-selections');
                }
            });
        }

        function updateStartButton() {
            const startBtn = document.getElementById('startBtn');
            // Check if any weeks are selected across all modules
            let totalSelected = 0;
            Object.values(selectedWeeksByModule).forEach(weekSet => {
                totalSelected += weekSet.size;
            });
            startBtn.disabled = totalSelected === 0;
        }

        function selectAllWeeks() {
            if (!currentModule) return;
            
            const checkbox = document.getElementById('allWeeksCheckbox');
            
            // Initialize if needed
            if (!selectedWeeksByModule[currentModule]) {
                selectedWeeksByModule[currentModule] = new Set();
            }
            
            // Get all weeks for current module
            const weeks = Object.keys(vocabData[currentModule]);
            
            // Use checkbox state to determine action
            if (checkbox && checkbox.checked) {
                // Select all with smooth fade
                weeks.forEach(week => {
                    selectedWeeksByModule[currentModule].add(week);
                    const btn = document.querySelector(`.week-btn[data-week="${week}"]`);
                    if (btn) btn.classList.add('selected');
                });
            } else {
                // Deselect all
                weeks.forEach(week => {
                    selectedWeeksByModule[currentModule].delete(week);
                    const btn = document.querySelector(`.week-btn[data-week="${week}"]`);
                    if (btn) btn.classList.remove('selected');
                });
            }
            
            updateStartButton();
            updateModuleStates();
        }

        function selectAllModules() {
            const checkbox = document.getElementById('allModulesCheckbox');
            const modules = Object.keys(vocabData);
            
            // Use checkbox state to determine action
            if (checkbox && checkbox.checked) {
                // Select all weeks in all modules
                modules.forEach(module => {
                    if (!selectedWeeksByModule[module]) {
                        selectedWeeksByModule[module] = new Set();
                    }
                    const weeks = Object.keys(vocabData[module]);
                    weeks.forEach(week => {
                        selectedWeeksByModule[module].add(week);
                    });
                });
            } else {
                // Deselect all
                modules.forEach(module => {
                    selectedWeeksByModule[module] = new Set();
                });
            }
            
            // Update UI
            updateWeekSelection();
            updateStartButton();
            updateModuleStates();
            updateAllModulesCheckbox();
        }

        function updateAllWeeksCheckbox() {
            if (!currentModule) return;
            
            const checkbox = document.getElementById('allWeeksCheckbox');
            if (!checkbox) return;
            
            const weeks = Object.keys(vocabData[currentModule]);
            const allSelected = weeks.every(week => 
                selectedWeeksByModule[currentModule] && selectedWeeksByModule[currentModule].has(week)
            );
            
            checkbox.checked = allSelected;
        }

        function updateAllModulesCheckbox() {
            const checkbox = document.getElementById('allModulesCheckbox');
            if (!checkbox) return;
            
            const modules = Object.keys(vocabData);
            const allFullySelected = modules.every(module => {
                const weeks = Object.keys(vocabData[module]);
                return selectedWeeksByModule[module] && weeks.every(week => selectedWeeksByModule[module].has(week));
            });
            
            checkbox.checked = allFullySelected;
        }

        // Test functionality
        function startTest() {
            const direction = document.querySelector('input[name="direction"]:checked').value;
            const mode = document.querySelector('input[name="mode"]:checked').value;

            // Collect questions from all selected weeks across all modules
            testQuestions = [];
            Object.keys(selectedWeeksByModule).forEach(module => {
                selectedWeeksByModule[module].forEach(week => {
                    const vocab = vocabData[module][week];
                    
                    vocab.forEach(item => {
                        testQuestions.push({
                            question: direction === 'es-en' ? item.spanish : item.english,
                            answer: direction === 'es-en' ? item.english : item.spanish,
                            spanish: item.spanish,
                            english: item.english
                        });
                    });
                });
            });

            // Shuffle questions
            testQuestions = testQuestions.sort(() => Math.random() - 0.5);
            currentQuestion = 0;
            correctAnswers = 0;

            // Show test interface
            document.getElementById('setupInterface').style.display = 'none';
            document.getElementById('testInterface').classList.add('active');

            if (mode === 'flashcards') {
                showFlashcard();
            } else {
                showTypingTest();
            }
        }

        function showFlashcard() {
            const testContent = document.getElementById('testContent');
            const question = testQuestions[currentQuestion];
            
            testContent.innerHTML = `
                <div class="flashcard" onclick="this.classList.toggle('revealed')">
                    <div class="flashcard-question">${question.question}</div>
                    <div class="flashcard-answer">${question.answer}</div>
                    <p style="margin-top: 30px; color: #999; font-size: 0.9rem;">Click to reveal answer</p>
                </div>
                <button class="next-btn" onclick="nextQuestion()" style="display: block; margin: 20px auto;">Next</button>
            `;
            
            updateProgress();
        }

        function showTypingTest() {
            // Remove any existing Enter listener from previous question
            document.removeEventListener('keypress', handleTypingEnter);
            
            const testContent = document.getElementById('testContent');
            const question = testQuestions[currentQuestion];
            
            testContent.innerHTML = `
                <div class="typing-test">
                    <div class="typing-question">${question.question}</div>
                    <input type="text" class="typing-input" id="answerInput" placeholder="Type your answer..." autocomplete="off">
                    <button class="submit-btn" onclick="checkAnswer()">Submit</button>
                    <div id="feedback"></div>
                    <div class="running-total" id="runningTotal"></div>
                </div>
            `;
            
            document.getElementById('answerInput').focus();
            document.addEventListener('keypress', handleTypingEnter);
            
            updateProgress();
            updateRunningTotal();
        }

        function handleTypingEnter(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('answerInput');
                if (!input.disabled) {
                    checkAnswer();
                } else {
                    nextQuestion();
                }
            }
        }

        function normalizeAnswer(text) {
            return text.toLowerCase()
                .trim()
                .replace(/\?/g, '')
                .replace(/¬ø/g, '')
                .replace(/\!/g, '')
                .replace(/¬°/g, '')
                .replace(/\.\.\./g, '') // Remove ... BEFORE removing single dots
                .replace(/‚Ä¶/g, '') // Remove ellipsis character
                .replace(/\./g, '') // Now remove single dots
                .replace(/\(.*?\)/g, '') // remove parentheses and contents
                .replace(/\[.*?\]/g, '') // remove square brackets and contents
                .replace(/\s+/g, ' ')
                .trim();
        }

        function checkAnswer() {
            const input = document.getElementById('answerInput');
            const feedback = document.getElementById('feedback');
            
            // First normalize the user's input
            let userAnswer = normalizeAnswer(input.value);
            const correctAnswer = normalizeAnswer(testQuestions[currentQuestion].answer);

            console.log('=== ANSWER CHECK DEBUG ===');
            console.log('Original input:', input.value);
            console.log('Normalized user answer:', userAnswer);
            console.log('Normalized correct answer:', correctAnswer);

            // Handle multiple possible answers separated by /
            const possibleAnswers = correctAnswer.split('/').map(a => a.trim());
            console.log('Possible answers:', possibleAnswers);
            
            // First check: without replacements
            let isCorrect = possibleAnswers.some(ans => userAnswer === ans) || 
                            possibleAnswers.every(ans => userAnswer.includes(ans));
            
            console.log('Initial check (no replacements):', isCorrect);

            // Only apply replacements if the answer was incorrect
            if (!isCorrect) {
                console.log('--- Applying replacements ---');
                const beforeReplacements = userAnswer;
                
                const replacements = {
                    "gira":"dobla",
                    "his": "his/her",
                    "her": "his/her",
                    "pe": "pe",
                    "a lot": "lots",
                    "tv": "television",
                    "dont": "do not",
                    "doesnt": "does not",
                    "don't": "do not",
                    "doesn't": "does not",
                    "im": "i am",
                    "i'm": "i am",
                    "ive": "i have",
                    "couldnt": "could not",
                    "couldn't": "could not",
                    "wouldnt": "would not",
                    "wouldn't": "would not",
                    "shouldnt": "should not",
                    "shouldn't": "should not",
                    "1":"one",
                    "2":"two",
                    "3":"three",
                    "4":"four",
                    "5":"five",
                    "6":"six",
                    "7":"seven",
                    "8":"eight",
                    "9":"nine",
                    "10":"ten",
                    "11":"eleven",
                    "12":"twelve",
                    "13":"thirteen",
                    "14":"fourteen",
                    "15":"fifteen",
                    "16":"sixteen",
                    "17":"seventeen",
                    "18":"eighteen",
                    "19":"nineteen",
                    "20":"twenty",
                    "21":"twenty-one",
                    "22":"twenty-two",
                    "23":"twenty-three",
                    "24":"twenty-four",
                    "25":"twenty-five",
                    "26":"twenty-six",
                    "27":"twenty-seven",
                    "28":"twenty-eight",
                    "29":"twenty-nine",
                    "30":"thirty",
                    "gray":"grey",
                    "to":"on"
                };
                
                // Replace each word in userAnswer if it matches a key in replacements
                Object.keys(replacements).forEach(word => {
                    const before = userAnswer;
                    userAnswer = userAnswer.replace(new RegExp(`\\b${word}\\b`, 'gi'), replacements[word]);
                    if (before !== userAnswer) {
                        console.log(`Word replacement: "${word}" -> "${replacements[word]}"`);
                        console.log(`Result: "${before}" -> "${userAnswer}"`);
                    }
                });
                
                console.log('After word replacements:', userAnswer);
                console.log('Checking against possible answers:', possibleAnswers);
                
                // Check again with replacements applied
                isCorrect = possibleAnswers.some(ans => userAnswer === ans) || 
                            possibleAnswers.every(ans => userAnswer.includes(ans));
                
                console.log('Final check result:', isCorrect);
            }

            console.log('=== END DEBUG ===');

            if (isCorrect) {
                correctAnswers++;
                feedback.className = 'feedback correct';
                feedback.innerHTML = `‚úì Correct! <br><button class="next-btn" onclick="nextQuestion()">Next</button>`;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `‚úó Incorrect. The answer is: ${testQuestions[currentQuestion].answer}<br><button class="next-btn" onclick="nextQuestion()">Next</button>`;
            }

            input.disabled = true;
            updateRunningTotal();
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion >= testQuestions.length) {
                showResults();
            } else {
                const mode = document.querySelector('input[name="mode"]:checked').value;
                if (mode === 'flashcards') {
                    showFlashcard();
                } else {
                    showTypingTest();
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / testQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateRunningTotal() {
            const runningTotal = document.getElementById('runningTotal');
            if (runningTotal) {
                const feedback = document.getElementById('feedback');
                let denominator;
                // If feedback is visible, user has just answered
                if (feedback && feedback.innerHTML.trim() !== "") {
                    denominator = currentQuestion + 1;
                } else {
                    denominator = currentQuestion;
                }
                const percentage = denominator > 0 ? Math.round((correctAnswers / denominator) * 100) : 0;
                runningTotal.innerHTML = `${correctAnswers}/${denominator} (${percentage}%)`;
            }
        }


        function showResults() {
            const testContent = document.getElementById('testContent');
            const mode = document.querySelector('input[name="mode"]:checked').value;
            const percentage = Math.round((correctAnswers / testQuestions.length) * 100);
            
            if (mode === 'flashcards') {
                // Flashcard mode - no scoring
                testContent.innerHTML = `
                    <div class="results">
                        <div class="results-title">All Done! üéâ</div>
                        <div style="font-size: 1.3rem; color: #666; margin-bottom: 20px;">
                            You reviewed <strong>${testQuestions.length}</strong> vocabulary items
                        </div>
                        <button class="start-btn" onclick="location.reload()">Start New Practice</button>
                    </div>
                `;
            } else {
                // Typing mode - show score
                testContent.innerHTML = `
                    <div class="results">
                        <div class="results-title">Test Complete!</div>
                        <div class="results-score">${correctAnswers} / ${testQuestions.length}</div>
                        <div style="font-size: 1.5rem; color: #666; margin-bottom: 30px;">${percentage}%</div>
                        <button class="start-btn" onclick="location.reload()">Start New Test</button>
                    </div>
                `;
            }
        }

        function backToSetup() {
            // Hide test interface and show setup interface
            document.getElementById('testInterface').classList.remove('active');
            document.getElementById('setupInterface').style.display = 'block';
            
            // Reset test state
            currentQuestion = 0;
            correctAnswers = 0;
            testQuestions = [];
        }

        // Event listeners
        document.getElementById('startBtn').onclick = startTest;

        // Initialize
        initializeUI();
    </script>
</body>
</html>
