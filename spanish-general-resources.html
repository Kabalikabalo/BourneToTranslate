<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spanish general resources</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        * { -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%);
            margin: 0; 
            padding: 0; 
            overflow-x: hidden;
        }
        
        /* Navbar with subtle slide-in animation */
        .navbar { 
            background: #DD1F25; 
            color: white; 
            height: 60px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; /* Changed from default */
            padding: 0 30px; 
            font-size: 1.5rem; 
            font-weight: 700; 
            letter-spacing: 1px;
            box-shadow: 0 2px 12px rgba(221, 31, 37, 0.15);
            animation: slideDown 0.5s ease-out;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .navbar a { 
            color: white; 
            text-decoration: none; 
            font-size: 1rem; 
            font-weight: 500; 
            margin-right: 25px;
            transition: all 0.2s ease;
            padding: 6px 12px;
            border-radius: 4px;
            flex-shrink: 0; /* Prevent back button from shrinking */
        }
        
        /* Title element for better control */
        .navbar-title {
            flex: 1 1 auto;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-right: 80px; /* Offset for back button width to center text */
        }
        
        /* Catalogue container with subtle fade-in */
        .catalogue-container { 
            max-width: 1100px; 
            margin: 0 auto; 
            padding: 40px 20px 20px 20px;
            animation: fadeIn 0.6s ease-out 0.1s both;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Search and filter container */
        .search-filter-container {
            max-width: 700px;
            margin: 0 auto 35px auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            animation: scaleIn 0.5s ease-out 0.3s both;
        }
        
        /* Search bar with gentle scale animation */
        .search-bar { 
            width: 100%; 
            max-width: 400px; 
            font-size: 1.1rem; 
            padding: 12px 18px; 
            border-radius: 30px; 
            border: 1px solid #DD1F25; 
            outline: none; 
            box-shadow: 0 2px 12px rgba(221, 31, 37, 0.08); 
            transition: all 0.25s ease;
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .search-bar:focus { 
            border-color: #AA151B;
            box-shadow: 0 3px 16px rgba(221, 31, 37, 0.15);
            transform: scale(1.01);
        }
        
        /* Topic filters */
        .topic-filters {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }
        
        .topic-filter-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            color: #444;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 20px;
            background: #fafafd;
            border: 2px solid #e0e0e0;
            transition: all 0.25s ease;
            user-select: none;
        }
        
        .topic-filter-label:hover {
            border-color: #DD1F25;
            background: #fff5f5;
        }
        
        .topic-filter-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #DD1F25;
        }
        
        .topic-filter-label.active {
            border-color: #DD1F25;
            background: #fff5f5;
            font-weight: 600;
        }
        
        /* Grid with subtle staggered card animations */
        .movies-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); 
            gap: 15px; 
        }
        
        .movie-card { 
            background: #fafafd; 
            border-radius: 20px; 
            box-shadow: 0 6px 26px rgba(221, 31, 37, 0.08); 
            overflow: hidden; 
            cursor: pointer; 
            display: flex; 
            flex-direction: column; 
            align-items: stretch; 
            text-decoration: none; 
            color: inherit;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(20px);
            animation: cardAppear 0.5s ease-out forwards;
        }
        
        /* Subtle stagger animation for each card */
        .movie-card:nth-child(1) { animation-delay: 0.4s; }
        .movie-card:nth-child(2) { animation-delay: 0.5s; }
        .movie-card:nth-child(3) { animation-delay: 0.6s; }
        .movie-card:nth-child(4) { animation-delay: 0.7s; }
        .movie-card:nth-child(5) { animation-delay: 0.8s; }
        .movie-card:nth-child(6) { animation-delay: 0.9s; }
        .movie-card:nth-child(n+7) { animation-delay: 1s; }
        
        @keyframes cardAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Card disappear animation for search filtering */
        .movie-card.hiding {
            animation: cardDisappear 0.3s ease-out forwards;
        }
        
        @keyframes cardDisappear {
            to {
                opacity: 0;
                transform: translateY(-10px) scale(0.98);
            }
        }
        
        .movie-card:hover { 
            box-shadow: 0 10px 35px rgba(221, 31, 37, 0.14); 
            transform: translateY(-4px);
        }
        
        .movie-card:active {
            transform: translateY(-2px);
        }
        
        .movie-image { 
            width: 100%; 
            aspect-ratio: 3/2; 
            object-fit: cover; 
            background: #eaeaea; 
            border-bottom: 1px solid #eee;
            transition: transform 0.35s ease;
        }
        
        .movie-card:hover .movie-image {
            transform: scale(1.04);
        }
        
        .movie-info { 
            padding: 18px 16px 70px 16px; /* Increased bottom padding for more gap */
            flex: 1;
            transition: all 0.25s ease;
            position: relative;
        }

            .movie-year {
                position: absolute;
                bottom: 12px;
                right: 16px;
                background: #DD1F25;
                color: #fff;
                font-size: 0.95rem;
                font-weight: 600;
                padding: 6px 16px;
                border-radius: 16px;
                box-shadow: 0 2px 8px rgba(221, 31, 37, 0.10);
                letter-spacing: 0.5px;
                z-index: 2;
                pointer-events: none;
                opacity: 0.93;
            }
        
        .movie-title { 
            font-size: 1.3rem; 
            font-weight: 700; 
            margin-bottom: 10px; 
            color: #DD1F25; 
            letter-spacing: 0.5px;
            transition: all 0.25s ease;
        }
        
        .movie-card:hover .movie-title {
            transform: translateX(3px);
            color: #AA151B;
        }
        
        .movie-intro { 
            font-size: 1rem; 
            color: #444; 
            opacity: 0.9;
            transition: all 0.25s ease;
        }
        
        .movie-card:hover .movie-intro {
            opacity: 1;
        }
        
        /* No results message */
        .no-results {
            grid-column: 1/-1;
            text-align: center;
            padding: 3em 2em;
            color: #DD1F25;
            font-weight: 600;
            font-size: 1.2rem;
            animation: fadeIn 0.4s ease-out;
        }

        /* Overlay base (ensure it's visible when opened) */
        .popup-overlay {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.45);
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(1px);
        }
        .popup-overlay.is-open { display: flex !important; }

        .popup-content {
            position: relative;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 18px 60px rgba(0,0,0,0.25);
            overflow-y: auto; /* Enable vertical scrolling */
            max-height: 90vh; /* Limit height to viewport */
            max-width: 700px;
            width: 95%;
        }
        .popup-close {
            position: absolute;
            top: 10px;
            right: 12px;
            width: 36px;
            height: 36px;
            border: none;
            background: #ffffff;
            color: #222;
            border-radius: 50%;
            font-size: 22px;
            line-height: 36px;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0,0,0,0.16);
            z-index: 10; /* Keep close button on top */
        }

        @media (max-width: 600px) { 
            .catalogue-container { padding: 20px 8px; }
            
            .movies-grid {
                gap: 12px;
                grid-template-columns: 1fr;
            }
            .movie-card {
                flex-direction: row;
                min-height: 120px;
                align-items: flex-start;
                padding-bottom: 24px;
            }
            .movie-image {
                width: 100px;
                height: 100px;
                aspect-ratio: 1/1;
                border-radius: 12px;
                border-bottom: none;
                flex-shrink: 0;
                margin: 12px;
            }
            .movie-info { 
                padding: 12px 12px 60px 12px; /* More bottom padding for topics */
                flex: 1;
                min-width: 0;
            }
            .movie-title {
                font-size: 1.1rem;
                margin-bottom: 6px;
            }
            .movie-intro {
                font-size: 0.9rem;
            }
            .movie-topics {
                position: absolute;
                bottom: 10px;
                left: 120px; /* Place topics under text, not image */
                right: auto;
                flex-wrap: wrap;
                gap: 6px;
            }
            .movie-topic {
                font-size: 0.85rem;
                padding: 5px 10px;
                border-radius: 12px;
                margin-bottom: 2px;
            }
            .navbar { font-size: 1.2rem; padding: 0 20px; }
        }

    /* Add styles for movie topics badge */
    .movie-topics {
        position: absolute;
        bottom: 12px;
        right: 16px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        z-index: 2;
    }
    .movie-topic {
        background: #DD1F25;
        color: #fff;
        font-size: 0.95rem;
        font-weight: 600;
        padding: 6px 14px;
        border-radius: 14px;
        box-shadow: 0 2px 8px rgba(221, 31, 37, 0.10);
        letter-spacing: 0.5px;
        opacity: 0.93;
        pointer-events: none;
        margin-bottom: 2px;
    }

    /* Add hover effect for button */
    #showMapBtn:hover {
        background: #AA151B;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(221, 31, 37, 0.3);
    }
    #showMapBtn:active {
        transform: translateY(0);
    }

    /* Adjust map card wrapper */
    .map-card-wrapper {
        animation: fadeIn 0.4s ease-out;
    }

    /* Map preview appear/disappear animation */
.map-card-wrapper {
    max-width: 1100px;
    margin: 18px auto 6px;
    padding: 0 20px;
    /* hidden by default, will be animated */
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transform: translateY(-6px);
    transition: max-height 350ms ease, opacity 250ms ease, transform 250ms ease;
    will-change: max-height, opacity, transform;
}
.map-card-wrapper.is-open {
    max-height: 380px; /* enough for 320px map + paddings */
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transform: translateY(0);
    margin-bottom: 40px; /* Add white space below when open */
}
@media (max-width: 600px) {
    .map-card-wrapper { padding: 0 12px; margin-bottom: 12px; }
    .map-card-wrapper.is-open { max-height: 330px; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
    .map-card-wrapper {
        transition: none;
        transform: none;
    }
}
    </style>
</head>
<body>
    <div class="navbar">
        <a href="general-resources.html">← Back</a>
        <span class="navbar-title">Spanish general resources</span>
    </div>

    <div class="catalogue-container">
        <div class="search-filter-container">
            <input type="text" class="search-bar" id="searchInput" placeholder="Search resources...">
            <div class="topic-filters">
                <label class="topic-filter-label">
                    <input type="checkbox" value="Movies"> Movies
                </label>
                <label class="topic-filter-label">
                    <input type="checkbox" value="Documentaries"> Documentaries
                </label>
            </div>
        </div>

        <div class="movies-grid" id="moviesGrid"></div>
    </div>

    <!-- Existing Popup Overlay -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-content" id="popupContent">
            <button class="popup-close" id="popupClose">&times;</button>
            <!-- Content will be injected here -->
        </div>
    </div>

    <script>
    // Resource data with popup content for each card
    const movies = [
        {
            title: "Street food; Latinoamérica",
            intro: "Common culture, food...",
            image: "GeneralResources/Spanish/StreetFood/StreetFood1.png",
            topics: ["Movies", "Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/StreetFood/StreetFood1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Street Food: Latinoamérica</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/Spanish/StreetFood/StreetFood3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Street Food: Latinoamérica is a fun and mouth-watering Netflix series that takes you on a trip across different countries in Latin America.<br><br>In each episode, you meet amazing street food cooks who share their tasty dishes and the stories behind them.<br><br>From spicy snacks in Mexico to sweet treats in Argentina, you’ll discover how food connects people, culture, and tradition. It’s perfect if you love trying new foods or learning about different places!</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/search?q=Street%20food%3A&jbv=81249660" target="_blank">Street food: Latin America on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/Spanish/StreetFood/StreetFood4.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `
        },
        {
            title: "Coco",
            intro: "Celebrating family and music...",
            image: "GeneralResources/Spanish/Coco/Coco3.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/Coco/Coco1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Coco</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/Spanish/Coco/Coco3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Despite his family's generations-old ban on music, young Miguel dreams of becoming an accomplished musician like his idol Ernesto de la Cruz.<br><br>Desperate to prove his talent, Miguel finds himself in the stunning and colorful Land of the Dead.<br><br>After meeting a charming trickster named Héctor, the two new friends embark on an extraordinary journey to unlock the real story behind Miguel's family history.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.disneyplus.com/en-gb/browse/entity-ce1ccdca-f468-4960-b67c-026b01ba42ab" target="_blank">Watch Coco on Disney Plus</a></span>
                    </div>
                    <img src="GeneralResources/Spanish/Coco/Coco2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `
        },
        {
            title: "La casa de papel: El fenómeno",
            intro: "A true version of events...",
            image: "GeneralResources/Spanish/LaCasaDePapelElFenómeno/LaCasaDePapelElFenómeno1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/LaCasaDePapelElFenómeno/LaCasaDePapelElFenómeno2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">La casa de papel: El fenómeno</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/Spanish/LaCasaDePapelElFenómeno/LaCasaDePapelElFenómeno3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Money Heist: The Phenomenon (La casa de papel: El fenómeno) is a 2020 documentary that explores the global success of the Spanish series Money Heist.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81098822" target="_blank">Watch La casa de papel: El fenómeno on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/Spanish/LaCasaDePapelElFenómeno/LaCasaDePapelElFenómeno1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `
        },
        {
            title: "Lorena, la de pies ligeros",
            intro: "A display of endurance, community and tradition...",
            image: "GeneralResources/Spanish/LorenaLaDePiesLigeros/LorenaLaDePiesLigeros1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/LorenaLaDePiesLigeros/LorenaLaDePiesLigeros2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Lorena, la de pies ligeros</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/Spanish/LorenaLaDePiesLigeros/LorenaLaDePiesLigeros3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Lorena Ramírez quietly accepts her fame as an ultra-marathon athlete who regularly out-paces her competitors. Part of Mexico's Rarámuri community, Lorena blazes through 65 to 95 kilometre runs wearing her traditional sandals.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/80244683" target="_blank">Watch Lorena, la de pies ligeros on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/Spanish/LorenaLaDePiesLigeros/LorenaLaDePiesLigeros1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `
        },
        {
            title: "Andes Mágicos",
            intro: "An amazing journey through the Andes...",
            image: "GeneralResources/Spanish/AndesMágicos/AndesMágicos1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/AndesMágicos/AndesMágicos2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Andes Mágicos</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/Spanish/AndesMágicos/AndesMágicos3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Andes Mágicos (Magical Andes) is a 6-part Netflix documentary series that follows individuals connected to the Andes mountain range across Argentina, Chile, Bolivia, Peru, Ecuador, and Colombia.<br><br>The series, created by Luis Ara and Alexandra Hardorf, explores the diverse cultures and landscapes of the mountains by showcasing personal stories of people living and working in this unique environment</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81154549" target="_blank">Watch Andes Mágicos on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/Spanish/AndesMágicos/AndesMágicos1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `
        },
        {
            title: "Break It All: The History of Rock in Latin America",
            intro: "Music, rebellion and identity across Latin America",
            image: "GeneralResources/Spanish/BreakItAll/BreakItAll1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/BreakItAll/BreakItAll1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Break It All: The History of Rock in Latin America</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/BreakItAll/BreakItAll2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Rock history illustration">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    This series explores five decades of rock movements across Latin America, showing how music intersects with politics, culture and resistance.
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81006953" target="_blank">Watch Break It All on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/BreakItAll/BreakItAll3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Rock history illustration">
                </div>
            `
        },
        {
            title: "Parchís: the Documentary",
            intro: "A nostalgic look at one of Spain’s iconic 80s children’s music groups",
            image: "GeneralResources/Spanish/Parchís/Parchis1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/Parchís/Parchis1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Parchís: the Documentary</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/Parchís/Parchis2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Parchis illustration">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    The story of Parchís, a children’s music phenomenon in Spain in the 1980s, and its impact on pop culture and society.
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81036520" target="_blank">Watch Parchís: the Documentary on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/Parchís/Parchis3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Parchis illustration">
                </div>
            `
        },
        {
            title: "Birders",
            intro: "Migration, nature and borderland ecosystems",
            image: "GeneralResources/Spanish/Birders/Birders1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/Birders/Birders1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Birders</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/Birders/Birders2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Bird migration illustration">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    A short documentary following bird migration across the US–Mexico border, and how ecosystems connect both sides.
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/80244682" target="_blank">Watch Birders on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/Birders/Birders3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Bird migration illustration">
                </div>
            `
        },
        {
            title: "Love at First Kiss (Eres tú)",
            intro: "When a first kiss reveals destiny…",
            image: "GeneralResources/Spanish/LoveAtFirstKiss/LoveAtFirstKiss1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/LoveAtFirstKiss/LoveAtFirstKiss1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Love at First Kiss</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/LoveAtFirstKiss/LoveAtFirstKiss2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Rom-com scene">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    Javier has a unique gift: ever since his first kiss at 16, he realizes when a kiss will be with “the one”. Romantic, funny and full of surprises.  
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81259655" target="_blank">Watch Love at First Kiss on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/LoveAtFirstKiss/LoveAtFirstKiss3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Rom-com scene">
                </div>
            `
        },
        {
            title: "Sounds Like Love (Fuimos canciones)",
            intro: "Friendship, heartbreak & Madrid vibes",
            image: "GeneralResources/Spanish/SoundsLikeLove/SoundsLikeLove1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/SoundsLikeLove/SoundsLikeLove1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Sounds Like Love</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/SoundsLikeLove/SoundsLikeLove2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Rom-com scene">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    Maca’s life is full of ups and downs: a stressful job, her ex showing up, and two best friends by her side. When past and present collide, things get messy… and real.  
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81046937" target="_blank">Watch Sounds Like Love on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/SoundsLikeLove/SoundsLikeLove3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Rom-com scene">
                </div>
            `
        },
        {
            title: "1000 Miles from Christmas (A mil kilómetros de la Navidad)",
            intro: "Christmas, love & cozy villages",
            image: "GeneralResources/Spanish/1000MilesFromChristmas/1000MilesFromChristmas1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/1000MilesFromChristmas/1000MilesFromChristmas1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">1000 Miles from Christmas</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/1000MilesFromChristmas/1000MilesFromChristmas2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Holiday village scene">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    A big city guy with zero love for Christmas is sent to a remote village to audit a turrón factory-and ends up sharing a roof (and adventures) with the local schoolteacher who’s all Christmas spirit. Food, snow, romance, and cozy feels.  
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81244214" target="_blank">Watch 1000 Miles from Christmas on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/1000MilesFromChristmas/1000MilesFromChristmas3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Holiday village scene">
                </div>
            `
        },
        {
            title: "Love, Divided (Pared con pared)",
            intro: "Neighbors separated by a wall… but maybe not in heart",
            image: "GeneralResources/Spanish/LoveDivided/LoveDivided1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/LoveDivided/LoveDivided1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Love, Divided</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/LoveDivided/LoveDivided2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Meet cute scene">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    She plays the piano. He’s a reclusive inventor. They can’t stand the noise from each other’s apartments-but maybe, through the wall, love finds its way.  
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81499999" target="_blank">Watch Love, Divided on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/LoveDivided/LoveDivided3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Meet cute scene">
                </div>
            `
        },
        {
            title: "You've Got This",
            intro: "Family, career and big life moments… with laughter",
            image: "GeneralResources/Spanish/YouveGotThis/YouveGotThis1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/Spanish/YouveGotThis/YouveGotThis1.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">You've Got This</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                <img src="GeneralResources/Spanish/YouveGotThis/YouveGotThis2.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Family moments scene">
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.1rem;color:#1a1a1a;">
                    A loving but overworked exec wants to be more than just successful-she wants a family too. When life gets chaotic, she learns what really matters (with lots of laughs).  
                    </span>
                </div>
                <div style="margin-bottom:1.5em;">
                    <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81050943" target="_blank">Watch You've Got This on Netflix</a></span>
                </div>
                <img src="GeneralResources/Spanish/YouveGotThis/YouveGotThis3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Family moments scene">
                </div>
            `
        }
    ];  

    function normalizeText(text) {
        return text ? text.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase() : '';
    }

    function getSelectedTopics() {
        const checkboxes = document.querySelectorAll('.topic-filters input[type="checkbox"]');
        const selected = [];
        checkboxes.forEach(cb => {
            if (cb.checked) {
                selected.push(cb.value);
            }
        });
        return selected;
    }

    function renderMoviesCatalogue(filter='') {
        const grid = document.getElementById('moviesGrid');
        const normalizedFilter = normalizeText(filter);
        const selectedTopics = getSelectedTopics();

        let shown = 0;
        let newHTML = '';
        movies.forEach((movie, index) => {
            const matchesFilter = !normalizedFilter ||
                normalizeText(movie.title).includes(normalizedFilter) ||
                normalizeText(movie.intro).includes(normalizedFilter);
            const matchesTopics = selectedTopics.length === 0 ||
                selectedTopics.some(topic => movie.topics.includes(topic));

            if (matchesFilter && matchesTopics) {
                shown++;
                newHTML += `
                    <div class="movie-card" tabindex="0" data-index="${index}" style="animation-delay:${0.05 * index}s;position:relative;">
                        <img src="${movie.image}" alt="${movie.title}" class="movie-image">
                        <div class="movie-info">
                            <div class="movie-title">${movie.title}</div>
                            <div class="movie-intro">${movie.intro}</div>
                        </div>
                        <div class="movie-topics">
                            ${movie.topics.map(topic => `<span class="movie-topic">${topic}</span>`).join(' ')}
                        </div>
                    </div>`;
            }
        });

        if (shown === 0) {
            newHTML = `<div class="no-results">No resources found.</div>`;
        }

        grid.innerHTML = newHTML;

        // Add click event listeners for popups
        document.querySelectorAll('.movie-card').forEach(card => {
            card.onclick = function() {
                const idx = this.getAttribute('data-index');
                showPopup(movies[idx].popup);
            };
            card.onkeydown = function(e) {
                if (e.key === "Enter" || e.key === " ") {
                    const idx = this.getAttribute('data-index');
                    showPopup(movies[idx].popup);
                }
            };
        });
    }

    function showPopup(html) {
        const overlay = document.getElementById('popupOverlay');
        const content = document.getElementById('popupContent');
        content.querySelector('.popup-close').onclick = hidePopup;
        content.innerHTML = `<button class="popup-close" id="popupClose">&times;</button>` + html;
        overlay.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        document.getElementById('popupClose').onclick = hidePopup;
        overlay.onclick = function(e) {
            if (e.target === overlay) hidePopup();
        };
        document.onkeydown = function(e) {
            if (e.key === "Escape") hidePopup();
        };
    }

    function hidePopup() {
        document.getElementById('popupOverlay').style.display = 'none';
        document.body.style.overflow = '';
        document.onkeydown = null;
    }

    renderMoviesCatalogue();

    document.getElementById('searchInput').addEventListener('input', function() {
        renderMoviesCatalogue(this.value);
    });

    const topicCheckboxes = document.querySelectorAll('.topic-filters input[type="checkbox"]');
    topicCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            this.parentElement.classList.toggle('active', this.checked);
            const searchValue = document.getElementById('searchInput').value;
            renderMoviesCatalogue(searchValue);
        });
        if (checkbox.checked) {
            checkbox.parentElement.classList.add('active');
        }
    });
    </script>
</body>
</html>