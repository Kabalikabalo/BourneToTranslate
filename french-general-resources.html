<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>French general resources</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        * { -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%);
            margin: 0; 
            padding: 0; 
            overflow-x: hidden;
        }
        
        /* Navbar */
        .navbar { 
            background: #0055A4; 
            color: white; 
            height: 60px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; /* Changed from default */
            padding: 0 30px; 
            font-size: 1.5rem; 
            font-weight: 700; 
            letter-spacing: 1px;
            box-shadow: 0 2px 12px rgba(0, 85, 164, 0.15);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .navbar a { 
            color: white; text-decoration: none; font-size: 1rem; font-weight: 500; 
            margin-right: 25px; transition: all 0.2s ease; padding: 6px 12px; border-radius: 4px;
            flex-shrink: 0; /* Prevent back button from shrinking */
        }
        .navbar a:hover { background: rgba(255,255,255,0.1); transform: translateX(-3px); }
        
        /* Title element for better control */
        .navbar-title {
            flex: 1 1 auto;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-right: 80px; /* Offset for back button width to center text */
        }

        /* Mobile: allow wrapping and auto height */
        @media (max-width: 600px) {
            .navbar {
                height: auto;
                min-height: 60px;
                padding: 10px 16px;
                overflow: visible;
                align-items: flex-start;
            }
            .navbar-title {
                white-space: normal;     /* allow wrap */
                text-overflow: clip;
                line-height: 1.2;
            }
        }

        /* Page layout */
        .catalogue-container { max-width: 1100px; margin: 0 auto; padding: 40px 20px 20px; }
        .search-filter-container {
            max-width: 700px; margin: 0 auto 20px; display: flex; flex-direction: column; gap: 16px; align-items: center;
        }
        .search-bar { width: 100%; max-width: 400px; font-size: 1.1rem; padding: 12px 18px; border-radius: 30px; border: 1px solid #0055A4; outline: none; box-shadow: 0 2px 12px rgba(0, 85, 164, 0.08); transition: all 0.25s ease; }
        .search-bar:focus { border-color: #0055A4; box-shadow: 0 3px 16px rgba(0,85,164,0.15); transform: scale(1.01); }
        .topic-filters { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; align-items: center; }
        .topic-filter-label { display: flex; align-items: center; gap: 8px; font-size: 1rem; color: #444; cursor: pointer; padding: 8px 16px; border-radius: 20px; background: #fafafd; border: 2px solid #e0e0e0; transition: all 0.25s ease; user-select: none; }
        .topic-filter-label:hover { border-color: #0055A4; background: #fff5f5; }
        .topic-filter-label input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; accent-color: #0055A4; }
        .topic-filter-label.active { border-color: #0055A4; background: #fff5f5; font-weight: 600; }

        /* Full-screen Overlay for both map and resources */
        .popup-overlay { 
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.45); 
            z-index: 9999; 
            display: none; 
            align-items: center; 
            justify-content: center; 
            padding: 20px;
            backdrop-filter: blur(1px);
        }
        .popup-overlay.is-open { display: flex !important; }

        .popup-content { 
            position: relative;
            background: #fff; 
            border-radius: 18px; 
            max-width: 700px; 
            width: 95vw; 
            max-height: 90vh; 
            overflow-y: auto;
            box-shadow: 0 8px 40px rgba(0,0,0,0.18);
        }

        .popup-close {
            position: absolute;
            top: 10px;
            right: 12px;
            width: 36px;
            height: 36px;
            border: none;
            background: #ffffff;
            color: #222;
            border-radius: 50%;
            font-size: 22px;
            line-height: 36px;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0,0,0,0.16);
            z-index: 10;
        }
        .popup-close:hover {
            box-shadow: 0 4px 16px rgba(0,85,164,0.15);
            background: #f0faff;
            color: #0055A4;
        }

        /* Movies grid/cards */
        .movies-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); 
            gap: 15px; 
        }

        .movie-card { 
            background: #fafafd; 
            border-radius: 20px; 
            box-shadow: 0 6px 26px rgba(0, 85, 164, 0.08); 
            overflow: hidden; 
            cursor: pointer; 
            display: flex; 
            flex-direction: column; 
            align-items: stretch; 
            text-decoration: none; 
            color: inherit;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .movie-card:hover { 
            box-shadow: 0 10px 35px rgba(0, 85, 164, 0.14); 
            transform: translateY(-4px);
        }

        .movie-card:active {
            transform: translateY(-2px);
        }

        .movie-image { 
            width: 100%; 
            aspect-ratio: 3/2; 
            object-fit: cover; 
            background: #eaeaea; 
            border-bottom: 1px solid #eee;
            transition: transform 0.35s ease;
        }

        .movie-card:hover .movie-image {
            transform: scale(1.04);
        }

        .movie-info { 
            padding: 18px 16px 70px 16px;
            flex: 1;
            transition: all 0.25s ease;
            position: relative;
        }

        .movie-title { 
            font-size: 1.3rem; 
            font-weight: 700; 
            margin-bottom: 10px; 
            color: #0055A4; 
            letter-spacing: 0.5px;
            transition: all 0.25s ease;
        }

        .movie-card:hover .movie-title {
            transform: translateX(3px);
            color: #0055A4;
        }

        .movie-intro { 
            font-size: 1rem; 
            color: #444; 
            opacity: 0.9;
            transition: all 0.25s ease;
        }

        .movie-card:hover .movie-intro {
            opacity: 1;
        }

        .movie-topics {
            position: absolute;
            bottom: 12px;
            right: 16px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            z-index: 2;
        }

        .movie-topic {
            background: #0055A4;
            color: #fff;
            font-size: 0.95rem;
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 14px;
            box-shadow: 0 2px 8px rgba(0, 85, 164, 0.10);
            letter-spacing: 0.5px;
            opacity: 0.93;
            pointer-events: none;
            margin-bottom: 2px;
        }

        /* No results message */
        .no-results {
            grid-column: 1/-1;
            text-align: center;
            padding: 3em 2em;
            color: #0055A4;
            font-weight: 600;
            font-size: 1.2rem;
        }

        @media (max-width: 600px) { 
            .catalogue-container { padding: 20px 8px; } 
            .movies-grid {
                gap: 12px;
                grid-template-columns: 1fr;
            }
            .movie-card {
                flex-direction: row;
                min-height: 120px;
                align-items: flex-start;
                padding-bottom: 24px;
            }
            .movie-image {
                width: 100px;
                height: 100px;
                aspect-ratio: 1/1;
                border-radius: 12px;
                border-bottom: none;
                flex-shrink: 0;
                margin: 12px;
            }
            .movie-info { 
                padding: 12px 12px 60px 12px;
                flex: 1;
                min-width: 0;
            }
            .movie-title {
                font-size: 1.1rem;
                margin-bottom: 6px;
            }
            .movie-intro {
                font-size: 0.9rem;
            }
            .movie-topics {
                position: absolute;
                bottom: 10px;
                left: 120px;
                right: auto;
                flex-wrap: wrap;
                gap: 6px;
            }
            .movie-topic {
                font-size: 0.85rem;
                padding: 5px 10px;
                border-radius: 12px;
                margin-bottom: 2px;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <a href="general-resources.html">‚Üê Back</a>
        <span class="navbar-title">French resources</span>
    </div>

    <div class="catalogue-container">
        <!-- Search and filters -->
        <div class="search-filter-container">
            <input type="text" class="search-bar" id="searchInput" placeholder="Search resources...">
            <div class="topic-filters">
                <label class="topic-filter-label">
                    <input type="checkbox" value="Movies"> Movies
                </label>
                <label class="topic-filter-label">
                    <input type="checkbox" value="Documentaries"> Documentaries
                </label>
            </div>
        </div>

        <!-- Catalogue grid -->
        <div class="movies-grid" id="moviesGrid"></div>
    </div>

    <!-- Resource Details Overlay (like Spanish) -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-content" id="popupContent">
            <button class="popup-close" id="popupClose">&times;</button>
            <!-- Content will be injected here -->
        </div>
    </div>

    <script>
    /* ===================== Resource catalogue ===================== */
    const movies = [
        {
            title: "Ratatouille",
            intro: "Common culture, food...",
            image: "GeneralResources/French/Ratatoullie/Ratatoullie1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/Ratatoullie/Ratatoullie2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Ratatoullie</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/Ratatoullie/Ratatoullie1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Remy dreams of becoming a great chef, despite being a rat in a definitely rodent-phobic profession.<br><br> He moves to Paris to follow his dream, and with the help of hapless garbage boy Linguini he puts his culinary skills to the test in the kitchen but he has to stay in hiding at the same time, with hilarious consequences.<br><br> Remy eventually gets the chance to prove his culinary abilities to a great food critic but is the food good? A Pixar animation.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.disneyplus.com/en-gb/browse/entity-ab7c4e29-04f1-46dd-931a-d43be1ce0f8c" target="_blank">Watch Ratatoullie on Disney plus</a></span>
                    </div>
                    <img src="GeneralResources/French/Ratatoullie/Ratatoullie3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `,
        },
        {
            title: "Le Chef",
            intro: "Comedy, food, and French kitchens",
            image: "GeneralResources/French/LeChef/LeChef1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/LeChef/LeChef2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Le Chef</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/LeChef/LeChef1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A feel-good French comedy following a veteran chef who clashes with his new boss over the future of French cuisine. When he meets a passionate amateur cook, they team up to revive the restaurant's reputation and rediscover the joy of cooking. Perfect for learners‚Äîclear speech, humor, and a delicious theme!</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.justwatch.com/uk/movie/le-chef" target="_blank">Watch Le Chef on JustWatch</a></span>
                    </div>
                    <img src="GeneralResources/French/LeChef/LeChef3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `,
        },
        {
            title: "La Famille B√©lier",
            intro: "Heartwarming story and clear, everyday French",
            image: "GeneralResources/French/FamilleBelier/FamilleBelier1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/FamilleBelier/FamilleBelier2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">La Famille B√©lier</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/FamilleBelier/FamilleBelier1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">Paula lives with her loving but deaf family on a farm. When her teacher discovers her incredible singing voice, she faces a tough decision‚Äîpursue her dreams in music or stay to help her family communicate. A touching comedy-drama with everyday vocabulary and plenty of heart.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.justwatch.com/uk/movie/la-famille-belier" target="_blank">Watch La Famille B√©lier on JustWatch</a></span>
                    </div>
                    <img src="GeneralResources/French/FamilleBelier/FamilleBelier3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
            `,
        },
        {
            title: "√ätre et Avoir",
            intro: "Documentary about a rural French school and everyday language",
            image: "GeneralResources/French/EtreEtAvoir/EtreEtAvoir1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/EtreEtAvoir/EtreEtAvoir2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">√ätre et Avoir</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/EtreEtAvoir/EtreEtAvoir1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Documentary illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A gentle and inspiring documentary about a small one-room school in rural France, where a single teacher educates children of all ages. The slow pace and clear, everyday conversations make it perfect for French learners. You'll hear natural interactions, classroom vocabulary, and glimpses of real French life.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.justwatch.com/uk/movie/etre-et-avoir" target="_blank">Watch √ätre et Avoir on JustWatch</a></span>
                    </div>
                    <img src="GeneralResources/French/EtreEtAvoir/EtreEtAvoir3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Documentary illustration">
                </div>
            `,
        },
        {
            title: "Le Chant du Loup",
            intro: "Thrilling submarine drama ",
            image: "GeneralResources/French/LeChantDuLoup/LeChantDuLoup1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/LeChantDuLoup/LeChantDuLoup2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Le Chant du Loup</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/LeChantDuLoup/LeChantDuLoup1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A gripping French thriller set in the high-stakes world of submarine warfare. The story follows a young sonar expert with an extraordinary hearing ability who must navigate political intrigue and military tension to prevent a global catastrophe. Fast-paced and intense, it's a great way to immerse yourself in modern French language and culture.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81027187" target="_blank">Watch Le Chant du Loup on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/French/LeChantDuLoup/LeChantDuLoup3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                </div>
                `,
        },
        {
            title: "Ad Vitam",
            intro: "A French action thriller about a former GIGN (counter-terrorism) operator whose pregnant wife is kidnapped.",
            image: "GeneralResources/French/AdVitam/AdVitam1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/AdVitam/AdVitam2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Ad Vitam</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/AdVitam/AdVitam1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A French action thriller about a former GIGN (counter-terrorism) operator whose pregnant wife is kidnapped.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81752951" target="_blank">Watch Ad Vitam on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/French/AdVitam/AdVitam3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration ending">
                </div>
                `,
        },
        {
            title: "Sous la Seine",
            intro: "A disaster / action movie: a giant shark appears in the Seine, chaos ensues in Paris.",
            image: "GeneralResources/French/SousLaSeine/SousLaSeine1.png",
            topics: ["Movies"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/SousLaSeine/SousLaSeine2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Sous la Seine</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/SousLaSeine/SousLaSeine1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A disaster / action movie: a giant shark appears in the Seine, chaos ensues in Paris.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81210788" target="_blank">Watch Sous la Seine on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/French/SousLaSeine/SousLaSeine3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Movie illustration ending">
                </div>
                `,
        },
        {
            title: "Les Bleus: Une autre histoire de France",
            intro: "A documentary exploring 20 years of the French national football team, identity, and culture.",
            image: "GeneralResources/French/LesBleus/LesBleus1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/LesBleus/LesBleus2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Les Bleus: Une autre histoire de France</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/LesBleus/LesBleus1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Documentary image">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A powerful look at football, national identity, and social change in France.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.justwatch.com/uk/movie/les-bleus-une-autre-histoire-de-france-1996-2016?" target="_blank">Watch on JustWatch</a></span>
                    </div>
                    <img src="GeneralResources/French/LesBleus/LesBleus3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Documentary ending image">
                </div>
            `,
        },
        {
            title: "Room 2806: The Accusation",
            intro: "A docuseries investigating the Dominique Strauss-Kahn scandal and its global political impact.",
            image: "GeneralResources/French/Room2806/Room2806_1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/Room2806/Room2806_2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">Room 2806: The Accusation</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/Room2806/Room2806_1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Documentary image">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A gripping political documentary exploring one of France‚Äôs most controversial legal cases.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81068760" target="_blank">Watch on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/French/Room2806/Room2806_3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Ending image">
                </div>
            `,
        },
        {
            title: "On est ensemble",
            intro: "A documentary following activists around the world fighting for justice and solidarity.",
            image: "GeneralResources/French/OnEstEnsemble/OnEstEnsemble1.png",
            topics: ["Documentaries"],
            popup: `
                <div class="hero-banner" style="height:220px;background-image:linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),url('GeneralResources/French/OnEstEnsemble/OnEstEnsemble2.png');background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;margin-bottom:30px;">
                    <h1 style="font-family:'Palatino Linotype',serif;font-size:2.2rem;color:#fff;text-shadow:0 4px 12px rgba(0,0,0,0.4);text-align:center;">On est ensemble</h1>
                </div>
                <div style="max-width:600px;margin:0 auto;padding:10px 20px 30px 20px;">
                    <img src="GeneralResources/French/OnEstEnsemble/OnEstEnsemble1.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Documentary image">
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.1rem;color:#1a1a1a;">A hopeful and inspiring documentary about activists shaping a better future.</span>
                    </div>
                    <div style="margin-bottom:1.5em;">
                        <span style="font-size:1.05rem;"><a href="https://www.netflix.com/title/81034018" target="_blank">Watch on Netflix</a></span>
                    </div>
                    <img src="GeneralResources/French/OnEstEnsemble/OnEstEnsemble3.png" style="display:block;margin:2em auto;max-width:100%;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.12);" alt="Ending image">
                </div>
            `,
        },
    ];

    function normalizeText(text){ return text ? text.normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase() : ''; }
    function getSelectedTopics(){
        return Array.from(document.querySelectorAll('.topic-filters input[type="checkbox"]:checked')).map(cb => cb.value);
    }

    function renderMoviesCatalogue(filter=''){
        const grid = document.getElementById('moviesGrid');
        const normalizedFilter = normalizeText(filter);
        const selectedTopics = getSelectedTopics();

        let shown = 0, html = '';
        movies.forEach((movie, index) => {
            const matchesFilter = !normalizedFilter ||
                normalizeText(movie.title).includes(normalizedFilter) ||
                normalizeText(movie.intro).includes(normalizedFilter);
            const matchesTopics = selectedTopics.length === 0 ||
                selectedTopics.some(topic => movie.topics.includes(topic));
            if (matchesFilter && matchesTopics) {
                shown++;
                html += `
                    <div class="movie-card" tabindex="0" data-index="${index}">
                        <img src="${movie.image}" alt="${movie.title}" class="movie-image">
                        <div class="movie-info">
                            <div class="movie-title">${movie.title}</div>
                            <div class="movie-intro">${movie.intro}</div>
                        </div>
                        <div class="movie-topics">
                            ${movie.topics.map(topic => `<span class="movie-topic">${topic}</span>`).join(' ')}
                        </div>
                    </div>
                `;
            }
        });

        grid.innerHTML = shown ? html : `<div class="no-results">No resources found.</div>`;

        // Card events -> full-screen overlay popup
        document.querySelectorAll('.movie-card').forEach(card => {
            const open = () => {
                const idx = Number(card.getAttribute('data-index'));
                showPopup(movies[idx].popup);
            };
            card.onclick = open;
            card.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') open(); };
        });
    }

    // Full-screen overlay popup (like Spanish)
    function showPopup(html) {
        const overlay = document.getElementById('popupOverlay');
        const content = document.getElementById('popupContent');
        content.innerHTML = `<button class="popup-close" id="popupClose">&times;</button>${html}`;
        overlay.classList.add('is-open');
        document.body.style.overflow = 'hidden';
        
        document.getElementById('popupClose').onclick = hidePopup;
        overlay.onclick = function(e) {
            if (e.target === overlay) hidePopup();
        };
        document.addEventListener('keydown', escClosePopup);
    }

    function hidePopup() {
        document.getElementById('popupOverlay').classList.remove('is-open');
        document.body.style.overflow = '';
        document.removeEventListener('keydown', escClosePopup);
    }

    function escClosePopup(e) {
        if (e.key === 'Escape') hidePopup();
    }

    // Search + topic filter
    function wireFilters(){
        document.getElementById('searchInput').addEventListener('input', function(){
            renderMoviesCatalogue(this.value);
        });
        document.querySelectorAll('.topic-filters input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', function(){
                this.parentElement.classList.toggle('active', this.checked);
                renderMoviesCatalogue(document.getElementById('searchInput').value);
            });
            if (cb.checked) cb.parentElement.classList.add('active');
        });
    }

    // Map button + overlay handlers
    function wireMapUI(){
        const showMapBtn = document.getElementById('showMapBtn');
        const mapCardWrapper = document.getElementById('mapCardWrapper');
        // If this page has no map UI, exit gracefully
        if (!showMapBtn || !mapCardWrapper) return;

        mapCardWrapper.style.display = 'block';

        showMapBtn.addEventListener('click', () => {
            const opening = !mapCardWrapper.classList.contains('is-open');
            
            if (opening){
                mapCardWrapper.classList.add('is-open');
                showMapBtn.textContent = 'üó∫Ô∏è Hide Map';
                if (typeof mapInitialized !== 'undefined' && !mapInitialized){
                    setTimeout(() => { if (typeof initMapPreview === 'function') initMapPreview(); mapInitialized = true; }, 200);
                } else if (typeof previewMap !== 'undefined' && previewMap) {
                    setTimeout(() => previewMap.invalidateSize(), 300);
                }
            } else {
                mapCardWrapper.classList.remove('is-open');
                showMapBtn.textContent = 'üó∫Ô∏è Show Map';
            }
        });

        const overlayClose = document.getElementById('mapOverlayClose');
        if (overlayClose) overlayClose.addEventListener('click', () => { if (typeof closeFullMap === 'function') closeFullMap(); });

        const overlay = document.getElementById('mapOverlay');
        if (overlay) overlay.addEventListener('click', (e) => {
            if (e.target.id === 'mapOverlay' && typeof closeFullMap === 'function') closeFullMap();
        });
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
        wireFilters();
        renderMoviesCatalogue();
        wireMapUI();
    });
    </script>
</body>
</html>
